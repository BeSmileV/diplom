\subsection{Обеспечение безопасности клиентской части}

Безопасность пользовательского взаимодействия является важнейшей составляющей архитектуры клиентской части платформы. В условиях, когда доступ к различным модулям приложения осуществляется на основе ролей, а взаимодействие с данными сопровождается отображением пользовательского контента, особое внимание уделяется как управлению доступом, так и защите от потенциальных атак, включая межсайтовое выполнение скриптов (XSS). В данной подсистеме реализован комплекс механизмов, направленных на защиту данных и поведения интерфейса со стороны клиента.

\subsubsection{Разграничения доступа}
Одним из ключевых компонентов обеспечения безопасности клиентской части является система контроля доступа на основе промежуточного слоя — промежуточное программное обеспечение~\cite{nextjs_middleware}. В рамках архитектуры фреймворка Next.js, промежуточное программное обеспечение представляет собой функцию, исполняемую при каждом запросе к защищённым маршрутам. Она позволяет перехватывать обращения к страницам до их рендеринга и на этой стадии выполнять необходимые проверки: наличие токена, его валидность, а также права пользователя.

В контексте реализуемой платформы при обращении пользователя к любой защищённой странице клиентская логика через промежуточное программное обеспечение извлекает JWT-токен из cookies и дешифрует его содержимое, получая полезную нагрузку — уникальный идентификатор, срок действия сессии и роль в системе (\textit{admin}, \textit{teacher}, \textit{student}).

На основе этой информации промежуточное программное обеспечение выполняет следующие действия:
\begin{enumerate}
  \item Если пользователь не авторизован (отсутствует валидный токен) — происходит автоматический редирект на страницу входа;
  \item Если пользователь авторизован, но не обладает достаточными правами — осуществляется перенаправление на главную страницу или отображается сообщение об отказе в доступе;
  \item Если пользователь обладает необходимой ролью — доступ к ресурсу предоставляется, и страница загружается с соответствующим контентом.
\end{enumerate}

Таким образом, промежуточное программное обеспечение дает надёжную фильтрацию обращений к различным частям интерфейса, предотвращая несанкционированный доступ и соблюдая политику разграничения прав.

\subsubsection{Роль и защита при работе с форматируемым текстом}
Дополнительным вектором потенциальной угрозы в клиентских приложениях является отображение форматируемого текста, особенно если пользователь имеет возможность редактировать его содержимое. В таких случаях возрастает риск внедрения вредоносных скриптов, замаскированных под обычный HTML.

Для решения данной задачи в проекте используется библиотека \textit{tiptap} — расширяемый редактор форматированного текста на основе редакторского фреймворка  \textit{ProseMirror}. Одним из ключевых преимуществ редактора \textit{tiptap} является контроль над тем, какие HTML-теги и атрибуты допускаются к отображению. Таким образом, даже если пользователь попытается вставить опасный текст программы, редактор удалит такие элементы на этапе парсинга.

Технически это реализуется следующим образом:
\begin{enumerate}
  \item При вводе содержимого редактор не сохраняет «сырые» HTML-строки, а формирует безопасное представление согласно заданным схемам;
  \item При рендеринге текста из базы или состояния редактор отображает только те элементы, которые были описаны как допустимые;
  \item Расширения (extensions), добавляемые к редактору \textit{tiptap}, позволяют точно контролировать список разрешённых тегов и атрибутов.
\end{enumerate}

Таким образом, даже при наличии активной формы редактирования форматируемого текста пользовательская среда остаётся защищённой от внедрения опасного контента.

\subsubsection{Вывод}

Комплекс реализованных решений позволяет эффективно защитить клиентскую часть приложения как от внешнего вмешательства, так и от ошибочного доступа пользователей. Промежуточное программное обеспечение производит проверку сессии и прав доступа до загрузки страниц, а редактор \textit{tiptap} гарантирует безопасность при работе с форматируемым текстом. Такое сочетание архитектурных и прикладных средств создаёт устойчивую и безопасную пользовательскую среду.
